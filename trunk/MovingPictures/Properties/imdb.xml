<ScriptableScraper>
  <details>
    <!-- These details are for display purposes only. -->
    <name>IMDb</name>
    <author>John Conrad (fforde)</author>
    <description>This script pulls data from IMDb.</description>

    <!-- 
    These two fields uniquely identify the script. The ID should never 
    change and should be unique (no other script should use this ID). With
    new versions of the script the version numbers should change. 
    -->
    <id>874902</id>
    <version major="0" minor="8" point="0"/>
    
    <!-- These fields are used for categorization purposes. -->
    <type>MovingPicturesMovieData</type>
    <language>English</language>

    <!-- If set to true, additional logging will be displayed during script execution. -->
    <debug>true</debug>
   </details>
  
  
  <action name="search">
    <retrieve name="searchPage" url="http://akas.imdb.com/find?s=tt;q={var:search_string:safe}" /> 

    <regex name="details" input="{var:searchPage}" pattern='&lt;br&gt;&lt;a href="([^"]+?)"&gt;([\w\s]+?)&lt;/a&gt; \((\d{4})\)&lt;' >
      <object type="DBMovieInfo">
        <field name="Title" value="{var:details:2}"/>
        <field name="Year" value="{var:details:3}"/>
        <variable name="url" value="http://akas.imdb.com{var:details:1}"/>
      </object>
    </regex>
  
  </action>
  
  
  <action name="details">
    <retrieve name="detailsPage" url="{var:url}"/>

    <regex input="{var:detailsPage}" name="director" pattern='&lt;h5&gt;Director:&lt;/h5&gt;\n&lt;a href="[^"]+?"&gt;([\w\s]+?)&lt;/a&gt;'>
      <field name="Directors" value="{var:director:1}"/>
    </regex>

    <regex input="{var:detailsPage}" name="writerBlock" pattern='&lt;div class="info"&gt;\n&lt;h5&gt;Writers:&lt;/h5&gt;.+?&lt;/div&gt;'/>
    <regex input="{var:writerBlock}" name="writer" pattern='&lt;a href="[^"]+?"&gt;(.+?)&lt;/a&gt; \(written by\)'>
      <field name='Writers' value='{var:writer:1}'/>
    </regex>
    
  </action>
  
</ScriptableScraper>